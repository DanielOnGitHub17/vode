{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interview - {{ role.title }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/editor/editor.main.min.css">
    <link rel="stylesheet" href="{% static 'interview/custom.css' %}">
</head>
<body>
    <!-- Main Content Area -->
    <main id="INTERVIEW_MAIN">
        <!-- Question Panel -->
        <section id="QUESTION_PANEL">
            <div id="QUESTION_HEADER">
                <div>
                    <h6><i class="bi bi-question-circle"></i> Problem</h6>
                    <small>{{ role.title }} - Round {{ round.number }} - {{ candidate.user.first_name }} {{ candidate.user.last_name }}</small>
                </div>
                <div id="HEADER_STATUS">
                    <span class="badge bg-success">Live</span>
                    <span class="badge bg-primary" id="TIMER_BADGE">00:00</span>
                </div>
            </div>
            <div id="QUESTION_CONTENT">
                {{ interview.question_text|safe }}
            </div>
        </section>

        <!-- Code Panel -->
        <section id="CODE_PANEL">
            <div id="CODE_HEADER">
                <h6><i class="bi bi-code-slash"></i> Code</h6>
                <select id="LANGUAGE_SELECT">
                    <option value="python">Python</option>
                    <option value="javascript">JavaScript</option>
                    <option value="typescript">TypeScript</option>
                    <option value="java">Java</option>
                    <option value="cpp">C++</option>
                    <option value="csharp">C#</option>
                    <option value="go">Go</option>
                </select>
            </div>
            <div id="CODE_EDITOR"></div>
            <div id="CODE_FOOTER">
                <div id="CONSOLE_OUTPUT">
                    <small><i class="bi bi-terminal"></i> Ready</small>
                </div>
                <div id="CODE_ACTIONS">
                    <button class="btn-success" id="BTN_RUN">
                        <i class="bi bi-play-fill"></i> Run
                    </button>
                    <button class="btn-primary" id="BTN_SUBMIT">
                        <i class="bi bi-check-circle"></i> Submit
                    </button>
                    <span id="CODE_STATUS">Ready</span>
                </div>
            </div>
        </section>
    </main>

    <!-- Minimized Icons Dock -->
    <div id="MINIMIZED_DOCK">
        <div class="dock-icon" id="DOCK_INTERVIEWER">
            <i class="bi bi-robot"></i>
        </div>
        <div class="dock-icon" id="DOCK_VIDEO">
            <i class="bi bi-camera-video"></i>
        </div>
        <div class="dock-icon" id="DOCK_CHAT">
            <i class="bi bi-chat-dots"></i>
        </div>
    </div>

    <!-- Detached Window: Interviewer -->
    <aside class="detached-window active" id="INTERVIEWER_WINDOW">
        <div class="window-header">
            <span><i class="bi bi-robot"></i> Interviewer</span>
            <button class="btn-icon-sm" id="BTN_MINIMIZE_INTERVIEWER">
                <i class="bi bi-dash"></i>
            </button>
        </div>
        <div class="window-content">
            <div id="AI_VISUAL">
                <div id="AI_ICON_WRAPPER">
                    <i class="bi bi-cpu-fill" id="AI_ICON"></i>
                    <i class="bi bi-mic-fill" id="MIC_ICON"></i>
                </div>
                <div id="AUDIO_WAVE">
                    <span class="wave-bar"></span>
                    <span class="wave-bar"></span>
                    <span class="wave-bar"></span>
                    <span class="wave-bar"></span>
                    <span class="wave-bar"></span>
                </div>
                <p id="AI_STATUS">Listening...</p>
            </div>
        </div>
    </aside>

    <!-- Detached Window: Video Feed -->
    <aside class="detached-window active" id="VIDEO_WINDOW">
        <div class="window-header">
            <span><i class="bi bi-camera-video"></i> Camera</span>
            <button class="btn-icon-sm" id="BTN_MINIMIZE_VIDEO">
                <i class="bi bi-dash"></i>
            </button>
        </div>
        <div class="window-content no-padding">
            <video id="VIDEO_STREAM" autoplay muted></video>
            <div id="VIDEO_PLACEHOLDER">
                <i class="bi bi-camera-video-off"></i>
                <p>Camera Feed</p>
            </div>
        </div>
    </aside>

    <!-- Detached Window: Chat -->
    <aside class="detached-window active" id="CHAT_WINDOW">
        <div class="window-header">
            <span><i class="bi bi-chat-dots"></i> Interview Chat</span>
            <button class="btn-icon-sm" id="BTN_MINIMIZE_CHAT">
                <i class="bi bi-dash"></i>
            </button>
        </div>
        <div class="window-content">
            <div id="CHAT_MESSAGES">
                <div class="chat-message system-message">
                    <i class="bi bi-info-circle"></i>
                    <p>Welcome to the interview! Feel free to ask questions during the session.</p>
                </div>
            </div>
            <div id="CHAT_INPUT_CONTAINER">
                <input type="text" id="CHAT_INPUT" placeholder="Type a message...">
                <button id="BTN_SEND_CHAT">
                    <i class="bi bi-send-fill"></i>
                </button>
            </div>
        </div>
    </aside>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js"></script>
    <script src="https://danielongithub17.github.io/funcs.js"></script>
    <script src="{% static 'interview/page.js' %}"></script>
</body>
</html>
