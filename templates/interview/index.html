{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interview - {{ interview.round.role.title }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/editor/editor.main.min.css">
    <link rel="stylesheet" href="{% static 'interview/custom.css' %}">
    <script src="https://danielongithub17.github.io/funcs.js"></script>
</head>
<body>
    <script src="{% static 'interview/permissions.js' %}"></script>
    <!-- Main Container -->
    <div id="INTERVIEW_CONTAINER">
        <!-- Main Content Area -->
        <main id="INTERVIEW_MAIN">
            <!-- Question Panel -->
            <section id="QUESTION_PANEL">
            <div id="QUESTION_HEADER">
                <div>
                    <h6><i class="bi bi-question-circle"></i> Problem Description</h6>
                    <small>{{ interview.round.role.title }} - Round {{ interview.round.round_number }} - {{ candidate.user.first_name }} {{ candidate.user.last_name }}</small>
                </div>
                <div id="HEADER_STATUS">
                    <span class="badge bg-success">Live</span>
                    <span class="badge bg-primary" id="TIMER_BADGE" data-started-time="{{ interview.started_at|date:'c' }}">{{ interview.round.time_limit }}</span>
                </div>
            </div>
            <div id="QUESTION_CONTENT">
                {{ question.statement|safe }}
            </div>
        </section>

        <!-- Code Panel -->
        <section id="CODE_PANEL">
            <div id="CODE_HEADER">
                <h6><i class="bi bi-code-slash"></i> Code</h6>
                <select id="LANGUAGE_SELECT" disabled>
                    <option value="python">Python</option>
                    <option value="javascript">JavaScript</option>
                    <option value="typescript">TypeScript</option>
                    <option value="java">Java</option>
                    <option value="cpp">C++</option>
                    <option value="csharp">C#</option>
                    <option value="go">Go</option>
                </select>
            </div>
            <div id="CODE_EDITOR"></div>
        </section>
    </main>

    <!-- Taskbar on the Right -->
    <aside id="TASKBAR">
        <div class="taskbar-icon" id="TASKBAR_INTERVIEWER" title="Interviewer">
            <i class="bi bi-robot"></i>
        </div>
        <div class="taskbar-icon" id="TASKBAR_VIDEO" title="Camera">
            <i class="bi bi-camera-video"></i>
        </div>
        <div class="taskbar-icon" id="TASKBAR_CHAT" title="Chat">
            <i class="bi bi-chat-dots"></i>
        </div>
    </aside>
</div>

    <!-- Detached Window: Interviewer -->
    <aside class="detached-window active" id="INTERVIEWER_WINDOW">
        <div class="window-header">
            <span><i class="bi bi-robot"></i> Interviewer</span>
        </div>
        <div class="window-content">
            <div id="AI_VISUAL">
                <div id="AI_ICON_WRAPPER">
                    <i class="bi bi-cpu-fill" id="AI_ICON"></i>
                </div>
                <p id="AI_STATUS">Listening...</p>
            </div>
        </div>
    </aside>

    <!-- Detached Window: Video Feed -->
    <aside class="detached-window hidden" id="VIDEO_WINDOW">
        <div class="window-header">
            <span><i class="bi bi-camera-video"></i> Camera</span>
        </div>
        <div class="window-content no-padding">
            <video id="VIDEO_STREAM" autoplay muted></video>
            <div id="VIDEO_PLACEHOLDER">
                <i class="bi bi-camera-video-off"></i>
                <p>Camera Feed</p>
            </div>
        </div>
    </aside>

    <!-- Detached Window: Chat -->
    <aside class="detached-window hidden" id="CHAT_WINDOW">
        <div class="window-header">
            <span><i class="bi bi-chat-dots"></i> Interview Chat</span>
        </div>
        <div class="window-content">
            <div id="CHAT_MESSAGES">
                <div class="chat-message system-message">
                    <i class="bi bi-info-circle"></i>
                    <p>Welcome to the interview! Feel free to ask questions during the session.</p>
                </div>
            </div>
            <div id="CHAT_INPUT_CONTAINER">
                <input type="text" id="CHAT_INPUT" placeholder="Type a message...">
                <button id="BTN_SEND_CHAT">
                    <i class="bi bi-send-fill"></i>
                </button>
            </div>
        </div>
    </aside>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js"></script>
    <script src="{% static 'interview/Windows.js' %}"></script>
    <script src="{% static 'interview/page.js' %}"></script>
    <script src="{% static 'interview/api.js' %}"></script>
    <script src="{% static 'interview/watch.js' %}"></script>
</body>
</html>
